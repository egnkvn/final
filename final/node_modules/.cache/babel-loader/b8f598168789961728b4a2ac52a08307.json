{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\vscode\\\\webfinalproject\\\\final\\\\final\\\\final\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\vscode\\\\webfinalproject\\\\final\\\\final\\\\final\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\vscode\\\\webfinalproject\\\\final\\\\final\\\\final\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect,useRef}from'react';import{NavLink,useNavigate}from'react-router-dom';import{Tabs,Button,Space,Input,Typography,message,DatePicker,Modal}from'antd';import axios from'../axios.js';import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Title=Typography.Title,Text=Typography.Text;var Property=function Property(_ref){var username=_ref.username;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),TotalIncome=_useState2[0],setTotalIncome=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),TotalOutcome=_useState4[0],setTotalOutcome=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),TotalMonth=_useState6[0],setTotalMonth=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),Record=_useState8[0],setRecord=_useState8[1];var Date=moment();var date=Date.format('YYYY-MM');var getData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,records;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/GetUserInformation',{// get backend\nparams:{username:username// give backend\n}});case 2:_yield$axios$get=_context.sent;records=_yield$axios$get.data.records;setRecord(records);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref2.apply(this,arguments);};}();var handleCalculate=function handleCalculate(){var tempIncome=0;var tempOutcome=0;var tempMonth=0;for(var i=0;i<Record.length;i++){var Status=Record[i].status;var cost=Record[i].cost;if(Status===\"支出\"){tempOutcome+=cost;if(Record[i].date_YM===date)tempMonth-=cost;}else if(Status===\"收入\"){tempIncome+=cost;if(Record[i].date_YM===date)tempMonth+=cost;}}setTotalIncome(tempIncome);setTotalOutcome(tempOutcome);setTotalMonth(tempMonth);};var handleColor=function handleColor(cost){if(cost<0)return\"danger\";else if(cost>0)return\"success\";};useEffect(function(){getData();},[]);console.log(Record);useEffect(function(){handleCalculate();},[Record]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'15%'}}),/*#__PURE__*/_jsxs(Title,{level:2,type:handleColor(TotalIncome-TotalOutcome),children:[\"$\",TotalIncome-TotalOutcome]}),/*#__PURE__*/_jsx(Title,{level:2,style:{marginTop:\"1%\",marginBottom:\"5%\"},children:\"\\u6DE8\\u8CC7\\u7522\"}),/*#__PURE__*/_jsxs(Space,{size:[100,20],wrap:true,align:\"center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Title,{level:2,type:\"danger\",children:[\"-$\",TotalOutcome]})}),/*#__PURE__*/_jsx(Title,{level:2,children:\"\\u7E3D\\u652F\\u51FA\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Title,{level:2,type:\"success\",children:[\"$\",TotalIncome]})}),/*#__PURE__*/_jsx(Title,{level:2,children:\"\\u7E3D\\u6536\\u5165\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Title,{level:2,type:handleColor(TotalMonth),children:[\"$\",TotalMonth]})}),/*#__PURE__*/_jsx(Title,{level:2,children:\"\\u672C\\u6708\\u6536\\u652F\"})]})]})]});};export default Property;","map":{"version":3,"sources":["C:/vscode/webfinalproject/final/final/final/src/Containers/Property.js"],"names":["React","useState","useEffect","useRef","NavLink","useNavigate","Tabs","Button","Space","Input","Typography","message","DatePicker","Modal","axios","moment","Title","Text","Property","username","TotalIncome","setTotalIncome","TotalOutcome","setTotalOutcome","TotalMonth","setTotalMonth","Record","setRecord","Date","date","format","getData","get","params","records","data","handleCalculate","tempIncome","tempOutcome","tempMonth","i","length","Status","status","cost","date_YM","handleColor","console","log","marginTop","marginBottom"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { NavLink, useNavigate } from 'react-router-dom';\r\nimport { Tabs, Button, Space, Input, Typography, message, DatePicker, Modal } from 'antd';\r\nimport axios from '../axios.js'\r\nimport moment from \"moment\";\r\n\r\nconst { Title, Text } = Typography;\r\n\r\nconst Property = ({ username }) => {\r\n\r\n    const [TotalIncome, setTotalIncome] = useState(0);\r\n    const [TotalOutcome, setTotalOutcome] = useState(0);\r\n    const [TotalMonth, setTotalMonth] = useState(0);\r\n    const [Record, setRecord] = useState([]);\r\n    const Date = moment();\r\n    const date = Date.format('YYYY-MM');\r\n\r\n    const getData = async () => {\r\n        const { data: { records } } = await axios.get('/api/GetUserInformation', { // get backend\r\n            params: {\r\n                username, // give backend\r\n            },\r\n        });\r\n        setRecord(records);\r\n    }\r\n    const handleCalculate = () => {\r\n        let tempIncome = 0;\r\n        let tempOutcome = 0;\r\n        let tempMonth = 0;\r\n        for (let i = 0; i < Record.length; i++) {\r\n            let Status = Record[i].status;\r\n            let cost = Record[i].cost;\r\n            if (Status === \"支出\") {\r\n                tempOutcome += cost;\r\n                if (Record[i].date_YM === date)\r\n                    tempMonth -= cost;\r\n            }\r\n            else if (Status === \"收入\") {\r\n                tempIncome += cost;\r\n                if (Record[i].date_YM === date)\r\n                    tempMonth += cost;\r\n            }\r\n        }\r\n        setTotalIncome(tempIncome);\r\n        setTotalOutcome(tempOutcome);\r\n        setTotalMonth(tempMonth);\r\n    }\r\n    const handleColor = (cost) => {\r\n        if (cost < 0)\r\n            return \"danger\";\r\n        else if (cost > 0)\r\n            return \"success\";\r\n    }\r\n    useEffect(() => {\r\n        getData();\r\n    }, [])\r\n    console.log(Record);\r\n\r\n    useEffect(() => {\r\n        handleCalculate();\r\n    }, [Record])\r\n    return (\r\n        <>\r\n            <div style={{ marginTop: '15%' }}></div>\r\n            <Title level={2} type={handleColor(TotalIncome - TotalOutcome)}>${TotalIncome - TotalOutcome}</Title>\r\n            <Title level={2} style={{ marginTop: \"1%\", marginBottom: \"5%\" }}>淨資產</Title>\r\n            <Space size={[100, 20]} wrap align='center'>\r\n                <div>\r\n                    <div>\r\n                        <Title level={2} type='danger'>-${TotalOutcome}</Title>\r\n                    </div>\r\n                    <Title level={2}>總支出</Title>\r\n                </div>\r\n                <div>\r\n                    <div>\r\n                        <Title level={2} type='success'>${TotalIncome}</Title>\r\n                    </div>\r\n                    <Title level={2}>總收入</Title>\r\n                </div>\r\n                <div>\r\n                    <div>\r\n                        <Title level={2} type={handleColor(TotalMonth)}>${TotalMonth}</Title>\r\n                    </div>\r\n                    <Title level={2}>本月收支</Title>\r\n                </div>\r\n            </Space>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Property;"]},"metadata":{},"sourceType":"module"}