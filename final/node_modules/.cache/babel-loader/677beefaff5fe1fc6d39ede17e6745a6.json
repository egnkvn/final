{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\vscode\\\\webfinalproject\\\\final\\\\final\\\\final\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\vscode\\\\webfinalproject\\\\final\\\\final\\\\final\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\vscode\\\\webfinalproject\\\\final\\\\final\\\\final\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect,useRef}from'react';import{NavLink,useNavigate}from'react-router-dom';import{Tabs,Button,Space,Input,Typography,message,DatePicker,Modal}from'antd';import'../Css/Add.css';import axios from'../axios.js';import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TabPane=Tabs.TabPane;var Search=Input.Search;var Title=Typography.Title;var Add=function Add(_ref){var username=_ref.username;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),Textfield=_useState2[0],setTextfield=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),Content=_useState4[0],setContent=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),Type=_useState6[0],setType=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),AddType=_useState8[0],setAddtype=_useState8[1];var _useState9=useState(\"支出\"),_useState10=_slicedToArray(_useState9,2),Status=_useState10[0],setStatus=_useState10[1];var _useState11=useState(moment()),_useState12=_slicedToArray(_useState11,2),Date=_useState12[0],setDate=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),address=_useState14[0],setAddress=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isModalVisible=_useState16[0],setIsModalVisible=_useState16[1];var navigate=useNavigate();// console.log(Date);\nvar handleTab=function handleTab(key){setTextfield(0);setStatus(key);};var handleCost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(cost){var date_Y,date_YM,date,r,_yield$axios$post,Message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:date_Y=Date.format('YYYY');date_YM=Date.format('YYYY-MM');date=Date.format('YYYY-MM-DD');r=/^[0-9]*[1-9][0-9]*$/;if(!(cost===\"\")){_context.next=8;break;}message.error({content:\"Please enter the number\"});_context.next=19;break;case 8:if(!r.test(cost)){_context.next=18;break;}console.log({username:username,date_Y:date_Y,date_YM:date_YM,date:date,record:{status:Status,type:Type,content:Content,cost:cost,address:address}});_context.next=12;return axios.post('/api/AddRecord',{username:username,date_Y:date_Y,date_YM:date_YM,date:date,record:{status:Status,type:Type,content:Content,cost:cost,address:address}});case 12:_yield$axios$post=_context.sent;Message=_yield$axios$post.data.Message;message.success({content:Message});navigate(\"/calendar\");_context.next=19;break;case 18:message.error({content:\"Please enter the number\"});case 19:case\"end\":return _context.stop();}}},_callee);}));return function handleCost(_x){return _ref2.apply(this,arguments);};}();var handleTextfield=function handleTextfield(event){setTextfield(1);// console.log(event.target.innerText);\nsetType(event.target.innerText);};var showModal=function showModal(){setIsModalVisible(true);};var handleOk=function handleOk(){if(AddType!==\"\"){setTextfield(1);setIsModalVisible(false);setType(AddType);message.success({content:'Add success'});}else{message.error({content:'Input value is empty'});}};var handleCancel=function handleCancel(){setIsModalVisible(false);};var outcome=[\"飲食\",\"交通\",\"日常用品\",\"服飾\",\"電話網路\",\"水電瓦斯\",\"娛樂\",\"教育\",\"保險\",\"稅金\"];var income=[\"工資\",\"獎金\",\"股票\",\"彩券\"];return/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:\"\\u652F\\u51FA\",centered:true,onTabClick:function onTabClick(key){return handleTab(key);},children:[/*#__PURE__*/_jsxs(TabPane,{tab:\"\\u652F\\u51FA\",children:[/*#__PURE__*/_jsxs(Space,{size:[20,20],wrap:true,align:\"center\",children:[new Array(10).fill(null).map(function(_,index){return/*#__PURE__*/_jsx(Button,{shape:\"round\",style:{height:'75px',width:'75px',padding:'4px 4px'},onClick:function onClick(event){return handleTextfield(event);},children:outcome[index]},index);}),/*#__PURE__*/_jsx(Button,{shape:\"round\",style:{height:'75px',width:'75px',padding:'4px 4px',fontSize:'25px'},onClick:showModal,children:\"+\"},'NEW'),/*#__PURE__*/_jsx(Modal,{title:\"\\u65B0\\u589E\\u9805\\u76EE\",visible:isModalVisible,onOk:handleOk,onCancel:handleCancel,children:/*#__PURE__*/_jsx(Input,{value:AddType,size:\"large\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u65B0\\u9805\\u76EE\",onChange:function onChange(e){setAddtype(e.target.value);}})})]}),/*#__PURE__*/_jsx(\"div\",{style:{margin:\"5%\"},children:Textfield?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Title,{level:2,children:/*#__PURE__*/_jsx(DatePicker,{size:\"large\",defaultValue:Date,onChange:function onChange(date){return setDate(date);},allowClear:false})}),/*#__PURE__*/_jsx(Title,{level:2,children:Date.format('YYYY-MM-DD')}),/*#__PURE__*/_jsx(Title,{level:2,style:{marginBottom:'10px'},children:Type}),/*#__PURE__*/_jsx(Input,{placeholder:\"\\u5099\\u8A3B\",allowClear:true,size:\"large\",style:{width:'60%',marginTop:'20px'},value:Content,onChange:function onChange(e){return setContent(e.target.value);}}),/*#__PURE__*/_jsxs(Title,{level:2,children:[/*#__PURE__*/_jsx(Input,{placeholder:\"\\u5730\\u5740\",allowClear:true,size:\"large\",style:{width:'60%',marginTop:'20px'},value:address,onChange:function onChange(e){return setAddress(e.target.value);}}),\" \"]}),/*#__PURE__*/_jsx(Search,{placeholder:\"\\u8ACB\\u8F38\\u5165\\u91D1\\u984D\",allowClear:true,enterButton:\"\\u78BA\\u8A8D\",size:\"large\",style:{width:'50%',marginTop:'20px'},onSearch:handleCost})]}):/*#__PURE__*/_jsx(_Fragment,{})})]},\"支出\"),/*#__PURE__*/_jsxs(TabPane,{tab:\"\\u6536\\u5165\",children:[/*#__PURE__*/_jsxs(Space,{size:[20,20],wrap:true,align:\"center\",children:[new Array(4).fill(null).map(function(_,index){return/*#__PURE__*/_jsx(Button,{shape:\"round\",style:{height:'75px',width:'75px',padding:'4px 4px'},onClick:function onClick(event){return handleTextfield(event);},children:income[index]},index);}),/*#__PURE__*/_jsx(Button,{shape:\"round\",style:{height:'75px',width:'75px',padding:'4px 4px',fontSize:'25px'},onClick:showModal,children:\"+\"},\"NEW\"),/*#__PURE__*/_jsx(Modal,{title:\"\\u65B0\\u589E\\u9805\\u76EE\",visible:isModalVisible,onOk:handleOk,onCancel:handleCancel,children:/*#__PURE__*/_jsx(Input,{value:AddType,size:\"large\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u65B0\\u9805\\u76EE\",onChange:function onChange(e){setAddtype(e.target.value);}})})]}),/*#__PURE__*/_jsx(\"div\",{style:{margin:\"5%\"},children:Textfield?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Title,{level:2,children:/*#__PURE__*/_jsx(DatePicker,{size:\"large\",defaultValue:Date,onChange:function onChange(date){return setDate(date);},allowClear:false})}),/*#__PURE__*/_jsx(Title,{level:2,children:Date.format('YYYY-MM-DD')}),/*#__PURE__*/_jsx(Title,{level:2,children:Type}),/*#__PURE__*/_jsx(Input,{placeholder:\"\\u5099\\u8A3B\",allowClear:true,size:\"large\",style:{width:'60%',marginTop:'20px'},value:Content,onChange:function onChange(e){return setContent(e.target.value);}}),/*#__PURE__*/_jsx(Search,{placeholder:\"\\u8ACB\\u8F38\\u5165\\u91D1\\u984D\",allowClear:true,enterButton:\"\\u78BA\\u8A8D\",size:\"large\",style:{width:'50%',marginTop:'20px'},onSearch:handleCost})]}):/*#__PURE__*/_jsx(_Fragment,{})})]},\"收入\")]});};export default Add;","map":{"version":3,"sources":["C:/vscode/webfinalproject/final/final/final/src/Containers/Add.js"],"names":["React","useState","useEffect","useRef","NavLink","useNavigate","Tabs","Button","Space","Input","Typography","message","DatePicker","Modal","axios","moment","TabPane","Search","Title","Add","username","Textfield","setTextfield","Content","setContent","Type","setType","AddType","setAddtype","Status","setStatus","Date","setDate","address","setAddress","isModalVisible","setIsModalVisible","navigate","handleTab","key","handleCost","cost","date_Y","format","date_YM","date","r","error","content","test","console","log","record","status","type","post","Message","data","success","handleTextfield","event","target","innerText","showModal","handleOk","handleCancel","outcome","income","Array","fill","map","_","index","height","width","padding","fontSize","e","value","margin","marginBottom","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { NavLink, useNavigate } from 'react-router-dom';\r\nimport { Tabs, Button, Space, Input, Typography, message, DatePicker, Modal } from 'antd';\r\nimport '../Css/Add.css';\r\nimport axios from '../axios.js'\r\nimport moment from \"moment\";\r\n\r\nconst { TabPane } = Tabs;\r\nconst { Search } = Input;\r\nconst { Title } = Typography;\r\n\r\n\r\nconst Add = ({ username }) => {\r\n    const [Textfield, setTextfield] = useState(0);\r\n    const [Content, setContent] = useState('');\r\n    const [Type, setType] = useState(\"\");\r\n    const [AddType, setAddtype] = useState(\"\");\r\n    const [Status, setStatus] = useState(\"支出\");\r\n    const [Date, setDate] = useState(moment());\r\n    const [address,setAddress] = useState(\"\");\r\n    const [isModalVisible, setIsModalVisible] = useState(false);\r\n    let navigate = useNavigate();\r\n\r\n    // console.log(Date);\r\n    const handleTab = (key) => {\r\n        setTextfield(0);\r\n        setStatus(key);\r\n    }\r\n\r\n    const handleCost = async (cost) => {\r\n        const date_Y = Date.format('YYYY');\r\n        const date_YM = Date.format('YYYY-MM');\r\n        const date = Date.format('YYYY-MM-DD');\r\n        var r = /^[0-9]*[1-9][0-9]*$/;\r\n        if (cost === \"\") {\r\n            message.error({\r\n                content: \"Please enter the number\"\r\n            })\r\n        }\r\n        else if (r.test(cost)) {\r\n            console.log({\r\n                username: username,\r\n                date_Y: date_Y,\r\n                date_YM: date_YM,\r\n                date: date,\r\n                record: {\r\n                    status: Status,\r\n                    type: Type,\r\n                    content: Content,\r\n                    cost: cost,\r\n                    address\r\n                }\r\n            })\r\n            const {\r\n                data: { Message },\r\n            } = await axios.post('/api/AddRecord', {\r\n                username: username,\r\n                date_Y: date_Y,\r\n                date_YM: date_YM,\r\n                date: date,\r\n                record: {\r\n                    status: Status,\r\n                    type: Type,\r\n                    content: Content,\r\n                    cost: cost,\r\n                    address\r\n                }\r\n            });\r\n            message.success({\r\n                content: Message\r\n            })\r\n            navigate(\"/calendar\");\r\n        }\r\n        else {\r\n            message.error({\r\n                content: \"Please enter the number\"\r\n            })\r\n        }\r\n    }\r\n    const handleTextfield = (event) => {\r\n        setTextfield(1);\r\n        // console.log(event.target.innerText);\r\n        setType(event.target.innerText);\r\n    }\r\n    const showModal = () => {\r\n        setIsModalVisible(true);\r\n    };\r\n\r\n    const handleOk = () => {\r\n        if (AddType !== \"\") {\r\n            setTextfield(1);\r\n            setIsModalVisible(false);\r\n            setType(AddType);\r\n            message.success({\r\n                content: 'Add success'\r\n            })\r\n        }\r\n        else {\r\n            message.error({\r\n                content: 'Input value is empty'\r\n            })\r\n        }\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        setIsModalVisible(false);\r\n    };\r\n\r\n    const outcome = [\"飲食\", \"交通\", \"日常用品\", \"服飾\", \"電話網路\", \"水電瓦斯\", \"娛樂\", \"教育\", \"保險\", \"稅金\"]\r\n    const income = [\"工資\", \"獎金\", \"股票\", \"彩券\"]\r\n\r\n    return (\r\n        <Tabs defaultActiveKey=\"支出\" centered onTabClick={(key) => handleTab(key)}>\r\n            <TabPane tab=\"支出\" key=\"支出\">\r\n                <Space size={[20, 20]} wrap align='center'>\r\n                    {new Array(10).fill(null).map((_, index) => (\r\n                        <Button shape='round' key={index} style={{ height: '75px', width: '75px', padding: '4px 4px' }}\r\n                            onClick={(event) => handleTextfield(event)}\r\n                        >{outcome[index]}\r\n                        </Button>\r\n                    ))}\r\n                    <Button shape='round' key={'NEW'} style={{ height: '75px', width: '75px', padding: '4px 4px', fontSize: '25px' }}\r\n                        onClick={showModal}\r\n                    >+\r\n                    </Button>\r\n                    <Modal title=\"新增項目\" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel}>\r\n                        <Input\r\n                            value={AddType}\r\n                            size='large'\r\n                            placeholder=\"請輸入新項目\"\r\n                            onChange={(e) => { setAddtype(e.target.value) }}\r\n                        />\r\n                    </Modal>\r\n                </Space>\r\n                <div style={{ margin: \"5%\" }}>\r\n                    {Textfield ? (<>\r\n                        <Title level={2}><DatePicker size='large' defaultValue={Date} onChange={(date) => setDate(date)} allowClear={false} /></Title>\r\n                        <Title level={2}>{Date.format('YYYY-MM-DD')}</Title>\r\n                        <Title level={2} style={{ marginBottom: '10px' }}>{Type}</Title>\r\n                        <Input placeholder=\"備註\"\r\n                            allowClear\r\n                            size=\"large\"\r\n                            style={{ width: '60%', marginTop: '20px' }}\r\n                            value={Content}\r\n                            onChange={(e) => setContent(e.target.value)}\r\n                        />\r\n                        <Title level={2}>\r\n                            <Input placeholder=\"地址\"\r\n                            allowClear\r\n                            size=\"large\"\r\n                            style={{ width: '60%', marginTop: '20px' }}\r\n                            value={address}\r\n                            onChange={(e) =>setAddress(e.target.value)}\r\n                            /> </Title>\r\n                        <Search\r\n                            placeholder=\"請輸入金額\"\r\n                            allowClear\r\n                            enterButton=\"確認\"\r\n                            size=\"large\"\r\n                            style={{ width: '50%', marginTop: '20px' }}\r\n                            onSearch={handleCost}\r\n                        />\r\n                    </>) : (<></>)\r\n                    }\r\n                </div>\r\n            </TabPane>\r\n            <TabPane tab=\"收入\" key=\"收入\">\r\n                <Space size={[20, 20]} wrap align='center'>\r\n                    {new Array(4).fill(null).map((_, index) => (\r\n                        <Button shape='round' key={index} style={{ height: '75px', width: '75px', padding: '4px 4px' }}\r\n                            onClick={(event) => handleTextfield(event)}\r\n                        >{income[index]}\r\n                        </Button>\r\n                    ))}\r\n                    <Button shape='round' key={\"NEW\"} style={{ height: '75px', width: '75px', padding: '4px 4px', fontSize: '25px' }}\r\n                        onClick={showModal}\r\n                    >+\r\n                    </Button>\r\n                    <Modal title=\"新增項目\" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel}>\r\n                        <Input\r\n                            value={AddType}\r\n                            size='large'\r\n                            placeholder=\"請輸入新項目\"\r\n                            onChange={(e) => { setAddtype(e.target.value) }}\r\n                        />\r\n                    </Modal>\r\n                </Space>\r\n                <div style={{ margin: \"5%\" }}>\r\n                    {Textfield ? (<>\r\n                        <Title level={2}><DatePicker size='large' defaultValue={Date} onChange={(date) => setDate(date)} allowClear={false} /></Title>\r\n                        <Title level={2}>{Date.format('YYYY-MM-DD')}</Title>\r\n                        <Title level={2}>{Type}</Title>\r\n                        <Input placeholder=\"備註\"\r\n                            allowClear\r\n                            size=\"large\"\r\n                            style={{ width: '60%', marginTop: '20px' }}\r\n                            value={Content}\r\n                            onChange={(e) => setContent(e.target.value)}\r\n                        />\r\n                        <Search\r\n                            placeholder=\"請輸入金額\"\r\n                            allowClear\r\n                            enterButton=\"確認\"\r\n                            size=\"large\"\r\n                            style={{ width: '50%', marginTop: '20px' }}\r\n                            onSearch={handleCost}\r\n                        />\r\n                    </>) : (<></>)\r\n                    }\r\n                </div>\r\n            </TabPane>\r\n        </Tabs>\r\n    )\r\n};\r\n\r\nexport default Add;"]},"metadata":{},"sourceType":"module"}